jQuery(document).ready(function(e){e(document).on("click",".vfb-item-edit-link",function(t){t.preventDefault(),e(t.target).closest("li").children(".vfb-field-item-settings").slideToggle("fast"),e(this).toggleClass("opened");var i=e(t.target).closest("dl");i.hasClass("vfb-field-item-inactive")?i.removeClass("vfb-field-item-inactive").addClass("vfb-field-item-active"):i.removeClass("vfb-field-item-active").addClass("vfb-field-item-inactive")}),e(document).on("click",".vfb-field-adv-settings-link",function(t){t.preventDefault(),e(this).parents(".vfb-row").children(".vfb-field-adv-settings").toggle();var i=e(this).children(".dashicons");i.hasClass("dashicons-arrow-down")?i.removeClass("dashicons-arrow-down").addClass("dashicons-arrow-up"):i.removeClass("dashicons-arrow-up").addClass("dashicons-arrow-down")}),e(document).on("click",".vfb-field-validation-settings-link",function(t){t.preventDefault(),e(this).parents(".vfb-row").children(".vfb-field-validation-settings").toggle();var i=e(this).children(".dashicons");i.hasClass("dashicons-arrow-down")?i.removeClass("dashicons-arrow-down").addClass("dashicons-arrow-up"):i.removeClass("dashicons-arrow-up").addClass("dashicons-arrow-down")}),e(document).on("change",".vfb-hidden-option",function(){var t=e(this).attr("id").match(new RegExp(/(\d+)$/g),"");"custom"===e(this).val()?(e("#vfb-hidden-custom-"+t).show(),e("#vfb-hidden-seq-start-"+t).hide(),e("#vfb-hidden-seq-step-"+t).hide()):"sequential-num"===e(this).val()?(e("#vfb-hidden-custom-"+t).hide(),e("#vfb-hidden-seq-start-"+t).show(),e("#vfb-hidden-seq-step-"+t).show()):(e("#vfb-hidden-custom-"+t).hide(),e("#vfb-hidden-seq-start-"+t).hide(),e("#vfb-hidden-seq-step-"+t).hide())})}),jQuery(document).ready(function(e){e("#vfb-form-items .vfb-draggable-form-items").draggable({connectToSortable:"#vfb-fields-list",helper:function(){var t;return'<dl class="vfb-field-item-bar"><dt class="vfb-field-item-handle"><span class="vfb-field-item-title">'+e(this).text()+"</span></dt></dl>"},distance:2,zIndex:5,cursorAt:{top:20},containment:"document"}),e("#vfb-fields-list").sortable({handle:".vfb-field-item-handle",placeholder:"vfb-sortable-placeholder",forcePlaceholderSize:!0,forceHelperSize:!0,tolerance:"pointer",create:function(){e(this).css("min-height",e(this).height())},stop:function(t,i){if(i.item.hasClass("ui-draggable-dragging")){i.item.hide();var n=e("#vfb-form-items").serializeArray(),a=i.item.text(),o=i.item,s=e(".vfb-accordion-section-content .spinner").show();e.post(ajaxurl,{action:"vfbp-create-field",order:e(this).sortable("toArray"),data:n,field_type:a,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(t){s.hide();var i=e(t),n=i.closest("li.vfb-field-item").attr("id");i.hide().insertBefore(o),e("#"+n).fadeIn(),o.remove()})}else e.post(ajaxurl,{action:"vfbp-sort-field",order:e(this).sortable("serialize"),vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done()}}),e("#vfb-form-items .vfb-draggable-form-items").click(function(t){t.preventDefault();var i=e("#vfb-form-items").serializeArray(),n=e(this).text(),a=e(".vfb-accordion-section-content .spinner").show();e.post(ajaxurl,{action:"vfbp-create-field",data:i,field_type:n,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(t){a.hide(),e("#vfb-fields-list").append(t)})})}),jQuery(document).ready(function(e){e(document).on("click",".vfb-field-delete",function(t){t.preventDefault();var i=[],n,a=e(this).attr("href").split("&"),o=vfbpL10n.confirmTitle,s=vfbpL10n.confirmText,r=vfbpL10n.confirmButton;e.confirm({title:o,text:s,confirmButton:r,confirm:function(){for(var t=0;t<a.length;t++){var n=a[t].indexOf("="),o=a[t].substring(0,n),s=a[t].substring(n+1);i[o]=s}e.post(ajaxurl,{action:"vfbp-delete-field",field:i.field,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(){e("#vfb-field-item-"+i.field).animate({opacity:0,height:0},350,function(){e(this).remove()})})},cancel:function(){return!1}})})}),jQuery(document).ready(function(e){e(document).on("click",".vfb-field-duplicate",function(t){t.preventDefault();for(var i=[],n,a=e(this).attr("href").split("&"),o=0;o<a.length;o++){var s=a[o].indexOf("="),r=a[o].substring(0,s),c=a[o].substring(s+1);i[r]=c}e.post(ajaxurl,{action:"vfbp-duplicate-field",field:i.field,order:e("#vfb-fields-list").sortable("toArray"),vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(t){var n=e(t).attr("id");e(t).hide().insertAfter("#vfb-field-item-"+i.field),e("#"+n).fadeIn()})})}),jQuery(document).ready(function(e){e(".vfb-options-table").sortable({items:".vfb-option",handle:".vfb-sort-option",helper:function(t,i){var n=i.children(),a=i.clone();return a.children().each(function(t){e(this).width(n.eq(t).width())}),a}}),e('.vfb-options-table input[type="radio"]').mousedown(function(){e(this).attr("previousValue",e(this).prop("checked"))}).click(function(){var t;"true"===e(this).attr("previousValue")&&e(this).prop("checked",!1)}),e(document).on("click",".vfb-button-option-add",function(t){t.preventDefault();var i=e(this).closest(".vfb-options-table").children(".vfb-cloned-options"),n=i.children(),a=n.length,o=a+1,s=n[a-1],r=e(s).attr("id"),c=r.match(new RegExp(/\w+$/g));o=parseInt(c[0])+1;var f=r.replace(new RegExp(/(\d+)$/g),""),l=e("#"+r).clone().attr("id",f+o),p=e(s).find('input[type="text"]').attr("name"),v=e(s).find('input[type="checkbox"]').attr("name"),d=p.replace(new RegExp(/\[(\d+)\]/g),"["+o+"]"),u=v.replace(new RegExp(/\[(\d+)\]/g),"["+o+"]");l.find('input[type="text"]').attr("id",f+o).attr("name",d),l.find('input[type="checkbox"]').attr("id",f+o).attr("name",u),l.find('input[type="radio"]').attr("value",o),i.append(l)}),e(document).on("click",".vfb-delete-option",function(t){var i;t.preventDefault(),e(this).closest(".vfb-options-table").children(".vfb-cloned-options").children(".vfb-option").length-1==0?window.alert("You must have at least one option."):e(this).closest("tr").remove()}),e(document).on("click",".vfb-bulk-options",function(t){t.preventDefault();var i=[],n,a=e(this).attr("id").match(new RegExp(/\w+$/g));e(this).parent().find("li").each(function(){i.push(e(this).text())}),e("#bulk-choices-text-"+a).val(i.join("\n"))}),e(document).on("click",".vfb-bulk-add-options",function(t){t.preventDefault();for(var i=[],n,a=e(this).attr("href").split("&"),o=0;o<a.length;o++){var s=a[o].indexOf("="),r=a[o].substring(0,s),c=a[o].substring(s+1);i[r]=c}var f=i.field,l,p=e("#bulk-choices-text-"+f).val().split("\n"),v=[],d,u=e("#vfb-field-item-"+f+" .vfb-cloned-options").children(),b=u.length,h=b+1,m=u[b-1],g=e(m).attr("id"),_=g.match(new RegExp(/\w+$/g));h=parseInt(_[0])+1;var x=g.replace(new RegExp(/(\d+)$/g),"");for(o=0;o<p.length;++o){v[o]=e("#"+g).clone().attr("id",x+h);var y=e(m).find('input[type="text"]').attr("name"),w=e(m).find('input[type="checkbox"]').attr("name"),k=y.replace(new RegExp(/\[(\d+)\]/g),"["+h+"]"),j=w.replace(new RegExp(/\[(\d+)\]/g),"["+h+"]");v[o].find('input[type="text"]').attr("id",x+h).attr("name",k).attr("value",p[o]),v[o].find('input[type="checkbox"]').attr("id",x+h).attr("name",j),v[o].find('input[type="radio"]').attr("value",h),h++}e("#"+g).after(v),window.tb_remove()}),e(document).on("change",".vfb-allow-other",function(){var t=e(this).parents(".vfb-form-group").children(".vfb-allow-other-input");e(t).toggle(e(this).prop("checked"))})}),jQuery(document).ready(function(e){e("#vfb-forms-switch-btn").click(function(t){t.preventDefault();var i=window.location.href,n=e(this).prev().val(),a=i.replace(new RegExp(/(form=)\d+/g),"$1"+n);window.location=a})}),jQuery(document).ready(function(e){var t=null;e(document).on("mouseenter mouseleave",".vfb-tooltip",function(i){var n,a,o='<div class="vfb-tooltip-popup"><div class="vfb-tooltip-arrow"></div><h3>'+e(this).attr("data-title")+"</h3><p>"+e(this).attr("data-content")+"</p></div>";"mouseenter"===i.type?(t&&(clearTimeout(t),t=null),e(this).append(o),e(this).find(".vfb-tooltip-popup").css({top:"-62px",left:25}),t=setTimeout(function(){e(".vfb-tooltip-popup").fadeIn(300)},500)):(e(".vfb-tooltip-popup").fadeOut(500),e(this).children(".vfb-tooltip-popup").detach())})});var vfbFormValidate=jQuery.extend({invalidateForm:function(e){return jQuery(e).addClass("form-invalid").find("input:visible").change(function(){jQuery(this).closest(".form-invalid").removeClass("form-invalid")})},validateForm:function(e){return e=jQuery(e),!vfbFormValidate.invalidateForm(e.find(".form-required").filter(function(){return""===jQuery("input:visible",this).val()})).size()}},vfbFormValidate);jQuery(document).ready(function(e){e("#vfbp-new-form").submit(function(){return vfbFormValidate.validateForm(e(this))})}),jQuery(document).ready(function(e){e("#expiration").datetimepicker()}),jQuery(document).ready(function(e){e("#email-to").tagsInput({width:"35em",height:"auto",defaultText:"add an email",pattern:/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/})}),jQuery(document).ready(function(e){e("#type").change(function(){var t=e(this).val();e(".vfb-confirmation-type").hide(),e("#vfb-confirmation-"+t).show()})}),jQuery(document).ready(function(e){CodeMirror.defineMode("wordpress",function(e,t){var i={token:function(e){var t;if(e.match("[")){for(;void 0!==(t=e.next())&&"]"!==t;);return"wordpress"}for(;void 0!==e.next()&&!e.match("[",!1););return null}};return CodeMirror.overlayMode(CodeMirror.getMode(e,t.backdrop||"htmlmixed"),i)}),e("#email-template").length&&CodeMirror.fromTextArea(document.getElementById("email-template"),{lineNumbers:!0,lineWrapping:!0,mode:"wordpress",theme:"base16-light"}),e(".vfb-color-picker").each(function(){var t,i=e(this).attr("id"),n=e("#"+i);n.wpColorPicker({change:function(e,t){n.css("background-color",t.color.toString())},clear:function(){n.css("background-color","")}})}),e("#email-template").bind("keydown.vfbInsertTab",function(t){var i=t.target,n,a,o,s,r;if(27!==t.keyCode){if(!(9!==t.keyCode||t.ctrlKey||t.altKey||t.shiftKey))if(e(i).data("tab-out"))e(i).data("tab-out",!1);else{n=i.selectionStart,a=i.selectionEnd,o=i.value;try{this.lastKey=9}catch(e){}document.selection?(i.focus(),(r=document.selection.createRange()).text="\t"):n>=0&&(s=this.scrollTop,i.value=o.substring(0,n).concat("\t",o.substring(a)),i.selectionStart=i.selectionEnd=n+1,this.scrollTop=s),t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}}else e(i).data("tab-out",!0)}),e("#email-template").bind("blur.vfbInsertTab",function(){this.lastKey&&9===this.lastKey&&this.focus()}),e("#format").change(function(){var t=e(this).val();e(".vfb-email-type").hide(),e("#vfb-email-"+t).show()});var t,i=e(".vfb-header-img-container"),n=e(".vfb-header-img-id"),a=e(".vfb-header-img-upload"),o=e(".vfb-header-img-delete");a.click(function(e){e.preventDefault(),t?t.open():((t=wp.media({states:[new wp.media.controller.Library({title:vfbpL10n.chooseImage,library:wp.media.query({type:"image"}),multiple:!1,date:!1,priority:20,suggestedWidth:600,suggestedHeight:200})]})).on("select",function(){var e=t.state().get("selection").first().toJSON();i.append('<img src="'+e.url+'" alt="" style="max-width:100%;"/>'),n.val(e.id),a.addClass("hidden"),o.removeClass("hidden")}),t.open())}),o.on("click",function(e){e.preventDefault(),i.html(""),a.removeClass("hidden"),o.addClass("hidden"),n.val("")})}),jQuery(document).ready(function(e){function t(t){e(".vfb-rule-field-value").autoComplete({source:function(i,n){e.getJSON(ajaxurl,{action:"vfbp-rules-autocomplete",term:i,field_id:t,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce},function(e){for(var t=i.toLowerCase(),a=[],o=0;o<e.length;o++){var s=e[o].toLowerCase();-1!==String(s).indexOf(t)&&a.push(e[o])}n(a)})},minChars:1,menuClass:"vfbp-rules-autocomplete"})}var i=vfbpL10n.deleteCondition,n=vfbpL10n.deleteRule;e(document).on("click",".vfb-add-condition",function(t){t.preventDefault();var i=e(this).closest(".vfb-rules-table").children(".vfb-cloned-conditions"),n=i.children(),a=n.length,o=a+1,s=n[a-1],r=e(s).attr("id"),c=r.match(new RegExp(/\w+$/g));o=parseInt(c[0])+1;var f=r.replace(new RegExp(/(\d+)$/g),""),l=e("#"+r).clone().attr("id",f+o),p=l.find('input[type="text"], select'),v=0;p.each(function(){this.name=this.name.replace(new RegExp(/(\d+)/g),function(e){return 1===v?o:(v++,e)}),v=0}),i.append(l)}),e(document).on("click",".vfb-delete-condition",function(t){var n;t.preventDefault(),e(this).closest(".vfb-rules-table").children(".vfb-cloned-conditions").children(".vfb-condition").length-1==0?window.alert(i):e(this).closest("tr").remove()}),e(document).on("click",".vfb-rules-actions-add",function(t){t.preventDefault();var i=e(this).closest(".vfb-rules-container").find(".vfb-rules"),n=i.length,a=n+1,o=i[n-1],s=e(o).attr("id"),r=s.match(new RegExp(/\w+$/g));a=parseInt(r[0])+1;var c=s.replace(new RegExp(/(\d+)$/g),""),f=e("#"+s).clone().attr("id",c+a),l=f.find('input[type="text"], select'),p=f.find(".vfb-condition"),v=0;l.each(function(){this.name=this.name.replace(new RegExp(/(\d+)/g),function(e){return 1===v?e:(v++,a)}),v=0});var d=0;p.each(function(){this.id=this.id.replace(new RegExp(/(\d+)/g),function(e){return 1===d?e:(d++,a)}),d=0}),f.insertAfter(o)}),e(document).on("click",".vfb-rules-actions-delete",function(t){var i;t.preventDefault(),e(this).closest("tbody").children(".vfb-rules").length-1==0?window.alert(n):e(this).closest(".vfb-rules").remove()}),e(document).on("change",".vfb-rules-select-label",function(){e(".vfb-rule-field-value").autoComplete("destroy"),t(e(this).val())}),e(document).on("focus",".vfb-rule-field-value",function(){var i=e(this).closest("tr").find(".vfb-rules-select-label");e(".vfb-rule-field-value").autoComplete("destroy"),t(i.val())})}),jQuery(document).ready(function(e){function t(t,i){e.post(ajaxurl,{action:"vfbp-price-fields-options",field:t,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(e){i.before(e)})}if(e("#user-enable").change(function(){e(".vfb-create-user-settings").toggle(e(this).prop("checked"))}),e("#post-enable").change(function(){e(".vfb-create-post-settings").toggle(e(this).prop("checked"))}),e("#design-enable").change(function(){e(".vfb-form-design-settings").toggle(e(this).prop("checked")),setTimeout(function(){i.refresh()},1)}),e("#cell-enable").change(function(){e(".vfb-cell-settings").toggle(e(this).prop("checked"))}),e("#mailchimp-enable").change(function(){e(".vfb-mailchimp-settings").toggle(e(this).prop("checked"))}),e("#campaign-monitor-enable").change(function(){e(".vfb-campaign-monitor-settings").toggle(e(this).prop("checked"))}),e("#highrise-enable").change(function(){e(".vfb-highrise-settings").toggle(e(this).prop("checked"))}),e("#freshbooks-enable").change(function(){e(".vfb-freshbooks-settings").toggle(e(this).prop("checked"))}),e("#payments-enable").change(function(){e(".vfb-payments-settings").toggle(e(this).prop("checked")),e(this).prop("checked")||e(".vfb-paypal-settings").hide()}),e("#payments-merchant").change(function(){var t=e(this).val();switch(e(".vfb-paypal-settings").hide(),t){case"paypal":e(".vfb-paypal-settings").show();break}}),e("#paypal-prepop-billing").change(function(){e(".vfb-paypal-billing").toggle(e(this).prop("checked"))}),e("#paypal-recurring").change(function(){e(".vfb-paypal-recurring").toggle(e(this).prop("checked"))}),e("#design-css").length)var i=CodeMirror.fromTextArea(document.getElementById("design-css"),{lineNumbers:!0,lineWrapping:!0,mode:"css",theme:"base16-light"});e(document).on("submit","#vfbp-designer-copy-settings",function(t){t.preventDefault();var i=e(this).serialize();e.post(ajaxurl,{action:"vfbp-form-designer-copy-settings-save",data:i,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(){window.tb_remove()})}),e("#vfb-mailchimp-verify-api .spinner, #vfb-mailchimp-deactivate-api .spinner,#vfb-campaign-monitor-verify-api .spinner, #vfb-campaign-monitor-deactivate-api .spinner #vfb-campaign-monitor-select-client .spinner,#vfb-highrise-verify-api .spinner, #vfb-highrise-deactivate-api .spinner,#vfb-freshbooks-verify-api .spinner, #vfb-freshbooks-deactivate-api .spinner").hide(),e("#vfb-mailchimp-verify-api").click(function(t){t.preventDefault();var i=e("#mailchimp-api").val(),n=e("#vfb-verified-mailchimp-text"),a=e('input[name="_vfbp_form_id"]').val(),o=e("#vfb-mailchimp-verify-api .spinner").show().css("visibility","visible");e.get(ajaxurl,{action:"vfbp-connect-mailchimp",api:i,form:a,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(t){o.hide();var i=e.parseJSON(t);e(n).html('<span class="status-'+i.status+'">'+i.message+"</span>"),e("#vfbp-addon-settings").submit()})}),e("#vfb-mailchimp-deactivate-api").click(function(t){t.preventDefault();var i=e("#mailchimp-api").val(),n=e("#vfb-verified-mailchimp-text"),a=e('input[name="_vfbp_form_id"]').val(),o=e("#vfb-mailchimp-verify-api .spinner").show().css("visibility","visible");e.get(ajaxurl,{action:"vfbp-disconnect-mailchimp",api:i,form:a,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(t){o.hide();var i=e.parseJSON(t);e(n).html('<span class="status-'+i.status+'">'+i.message+"</span>"),e("#vfbp-addon-settings").submit()})}),e("#vfb-campaign-monitor-verify-api").click(function(t){t.preventDefault();var i=e("#campaign-monitor-api").val(),n=e("#vfb-verified-campaign-monitor-text"),a=e('input[name="_vfbp_form_id"]').val(),o=e("#vfb-campaign-monitor-verify-api .spinner").show().css("visibility","visible");e.get(ajaxurl,{action:"vfbp-connect-campaign-monitor",api:i,form:a,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(t){o.hide();var i=e.parseJSON(t);e(n).html('<span class="status-'+i.status+'">'+i.message+"</span>"),e("#vfbp-addon-settings").submit()})}),e("#vfb-campaign-monitor-deactivate-api").click(function(t){t.preventDefault();var i=e("#campaign-monitor-api").val(),n=e("#vfb-verified-campaign-monitor-text"),a=e('input[name="_vfbp_form_id"]').val(),o=e("#vfb-campaign-monitor-verify-api .spinner").show().css("visibility","visible");e.get(ajaxurl,{action:"vfbp-disconnect-campaign-monitor",api:i,form:a,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(t){o.hide();var i=e.parseJSON(t);e(n).html('<span class="status-'+i.status+'">'+i.message+"</span>"),e("#vfbp-addon-settings").submit()})}),e("#vfb-campaign-monitor-select-client").click(function(t){t.preventDefault();var i=e("#campaign-monitor-api").val(),n=e("#campaign-monitor-client-id").val(),a=e('input[name="_vfbp_form_id"]').val(),o=e("#vfb-campaign-monitor-select-client .spinner").show().css("visibility","visible");e.get(ajaxurl,{action:"vfbp-campaign-monitor-select-client",api:i,client:n,form:a,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(t){o.hide(),e("#vfb-campaign-monitor-client-response").after(t)})}),e("#vfb-highrise-verify-api").click(function(t){t.preventDefault();var i=e("#highrise-api").val(),n=e("#highrise-subdomain").val(),a=e("#vfb-verified-highrise-text"),o=e('input[name="_vfbp_form_id"]').val(),s=e("#vfb-highrise-verify-api .spinner").show().css("visibility","visible");e.get(ajaxurl,{action:"vfbp-connect-highrise",api:i,domain:n,form:o,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(t){s.hide();var i=e.parseJSON(t);e(a).html('<span class="status-'+i.status+'">'+i.message+"</span>"),e("#vfbp-addon-settings").submit()})}),e("#vfb-highrise-deactivate-api").click(function(t){t.preventDefault();var i=e("#highrise-api").val(),n=e("#vfb-verified-highrise-text"),a=e('input[name="_vfbp_form_id"]').val(),o=e("#vfb-highrise-verify-api .spinner").show().css("visibility","visible");e.get(ajaxurl,{action:"vfbp-disconnect-highrise",api:i,form:a,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(t){o.hide();var i=e.parseJSON(t);e(n).html('<span class="status-'+i.status+'">'+i.message+"</span>"),e("#vfbp-addon-settings").submit()})}),e("#vfb-freshbooks-verify-api").click(function(t){t.preventDefault();var i=e("#freshbooks-api").val(),n=e("#freshbooks-subdomain").val(),a=e("#vfb-verified-freshbooks-text"),o=e('input[name="_vfbp_form_id"]').val(),s=e("#vfb-freshbooks-verify-api .spinner").show().css("visibility","visible");e.get(ajaxurl,{action:"vfbp-connect-freshbooks",api:i,domain:n,form:o,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(t){s.hide();var i=e.parseJSON(t);e(a).html('<span class="status-'+i.status+'">'+i.message+"</span>"),e("#vfbp-addon-settings").submit()})}),e("#vfb-freshbooks-deactivate-api").click(function(t){t.preventDefault();var i=e("#freshbooks-api").val(),n=e("#vfb-verified-freshbooks-text"),a=e('input[name="_vfbp_form_id"]').val(),o=e("#vfb-freshbooks-verify-api .spinner").show().css("visibility","visible");e.get(ajaxurl,{action:"vfbp-disconnect-freshbooks",api:i,form:a,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(t){o.hide();var i=e.parseJSON(t);e(n).html('<span class="status-'+i.status+'">'+i.message+"</span>"),e("#vfbp-addon-settings").submit()})});var n=[],a=e(".vfb-payment-field-ids");a.length&&e(a).each(function(){n.push(e(this).val())}),e(document).on("change","#vfb-payment-fields",function(){var i=e(this).val(),a=e('input[name="_vfbp_form_id"]').val(),o=e(this);""!==i&&(n.push(i),t(i,e(".vfb-payment-assign-prices-header")),e.post(ajaxurl,{action:"vfbp-price-fields",form:a,fields:n,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(e){o.html(e)}))}),e(document).on("click",".vfb-payment-remove-field",function(t){t.preventDefault();for(var i=[],a=e('input[name="_vfbp_form_id"]').val(),o=e(this).parents(".vfb-pricing-fields-container"),s,r=e(this).attr("href").split("&"),c=0;c<r.length;c++){var f=r[c].indexOf("="),l=r[c].substring(0,f),p=r[c].substring(f+1);i[l]=p}var v=i.field,d=n.indexOf(v);-1!==d&&n.splice(d,1),o.fadeOut(350,function(){e(this).remove()}),e.post(ajaxurl,{action:"vfbp-price-fields",form:a,field:n,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(t){e("#vfb-payment-fields").html(t)})})}),jQuery(document).ready(function(e){e("#smtp-auth").change(function(){e("#smtp-auth-details").toggle(e(this).prop("checked"))}),e("#smtp-encryption input").change(function(){var t=e("#smtp-port");"tls"===e(this).val()?t.val("587"):"ssl"===e(this).val()?t.val("465"):t.val("25")}),e("#custom-validation-msgs").change(function(){e("#vfb-validation-msgs").toggle(e(this).prop("checked"))}),e("#vfb-verify-license .spinner, #vfb-deactivate-license .spinner").hide(),e("#vfb-verify-license").click(function(t){t.preventDefault();var i=e("#license-key").val(),n=e("#license-email").val(),a=e("#vfb-verified-text"),o=e("#vfb-verify-license .spinner").show().css("visibility","visible");e.get(ajaxurl,{action:"vfbp-verify-license",license:i,email:n,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(t){o.hide();var i=e.parseJSON(t);e(a).html('<span class="status-'+i.status+'">'+i.message+"</span>"),1===i.status&&e("#vfbp-settings").submit()})}),e("#vfb-deactivate-license").click(function(t){t.preventDefault();var i=e("#license-key").val(),n=e("#license-email").val(),a=e("#vfb-verified-text"),o=e("#vfb-deactivate-license .spinner").show().css("visibility","visible");e.get(ajaxurl,{action:"vfbp-deactivate-license",license:i,email:n,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(t){o.hide();var i=e.parseJSON(t);e(a).html('<span class="status-'+i.status+'">'+i.message+"</span>"),e("#vfbp-settings").submit()})})}),jQuery(document).ready(function(e){if("edit-vfb_entry"===pagenow){var t=e("#vfb-entry-form-ids").val();e(document).on("click",".hide-column-tog",function(){var i=columns.hidden();e.post(ajaxurl,{action:"vfbp-entry-columns",columns:i,form_id:t,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce})})}}),jQuery(document).ready(function(e){e("#vfbp-export").find("input:radio").change(function(){"entries"===e(this).val()?e(".vfb-export-entries-options").show():e(".vfb-export-entries-options").hide()}),e("#vfb-export-select-all").click(function(t){t.preventDefault(),e('#vfb-export-entries-fields input[type="checkbox"]').prop("checked",!0)}),e("#vfb-export-unselect-all").click(function(t){t.preventDefault(),e('#vfb-export-entries-fields input[type="checkbox"]').prop("checked",!1)}),e("#start-date").datetimepicker({format:"Y/m/d",onShow:function(){this.setOptions({maxDate:!!e("#end-date").val()&&e("#end-date").val()})},timepicker:!1,closeOnDateSelect:!0}),e("#end-date").datetimepicker({format:"Y/m/d",onShow:function(){this.setOptions({minDate:!!e("#start-date").val()&&e("#start-date").val()})},timepicker:!1,closeOnDateSelect:!0}),e("#vfb-export-forms-list").change(function(){var t=e(this).val();e("#vfb-export-entries-fields").html("Loading..."),e.get(ajaxurl,{action:"vfbp-export-fields",id:t,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(t){e("#vfb-export-entries-fields").html(t)})})});